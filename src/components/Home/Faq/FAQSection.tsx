"use client";

import React, { useState } from "react";
import Image from "next/image";

// تعریف اینترفیس داده‌ها
interface FAQItem {
  question: string;
  answer: string;
}

// داده‌های سوالات (از کد Vue شما)
const faqs: FAQItem[] = [
  {
    question:
      "آیا برای خرید بلیط اتوبوس از پایاسفر باید هزینه اضافی پرداخت کنیم؟",
    answer:
      "خیر قیمت بلیط اتوبوس در پایاسفر دقیقاً قیمتی است که شرکت‌های مسافربری اعلام کرده‌اند.",
  },
  {
    question: "برای رزرو آنلاین بلیط از پایاسفر چه مدارکی نیاز داریم؟",
    answer:
      "برای رزرو بلیط از پایاسفر تنها به شماره‌تلفن و کارت اعتباری (دارای رمز دوم) نیاز دارید.",
  },
  {
    question: "آیا قیمت‌ها و تخفیف‌ها در پایاسفر ارائه می‌شوند؟",
    answer:
      "بله با استفاده از پایاسفر می‌توانید در زمان کمی به قیمت‌ها و تخفیف‌ها دسترسی داشته باشید.",
  },
  {
    question: "آیا می‌توانیم بلیط خود را کنسل کنیم؟",
    answer: "بله امکان باطل کردن بلیط و استرداد آن در پایاسفر وجود دارد.",
  },
  {
    question: "آیا چاپ و نمایش برگه اطلاعات بلیط ضروری است؟",
    answer:
      "درصورتی‌که بخواهید برگه بلیط را چاپ کنید، با ارائه شماره بلیت می‌توانید این کار را انجام دهید. شماره بلیط بعد از خرید اینترنتی بلیط برایتان پیامک خواهد شد.",
  },
];

export default function FAQSection() {
  // ایندکس آیتم باز شده (null یعنی همه بسته)
  const [openIndex, setOpenIndex] = useState<number | null>(0);

  const toggleFAQ = (index: number) => {
    setOpenIndex(openIndex === index ? null : index);
  };

  return (
    <section className="pt-11 pb-8 md:pt-1 md:pb-4">
      <div className=" mx-auto">
        <div className="flex flex-col md:flex-row items-start md:items-center justify-between gap-8">
          {/* تصویر سمت راست (مخصوص دسکتاپ) */}
          {/* طبق کد Vue شما، تصویر در col-lg-3 بوده است */}
          <div className="hidden md:block w-full md:w-4/12 lg:w-3/12">
            <div className="relative w-full aspect-square max-w-[300px] mx-auto">
              <Image
                src="/images/images/faq.webp"
                alt="پشتیبانی"
                fill
                className="object-contain"
              />
            </div>
          </div>

          {/* لیست سوالات سمت چپ */}
          <div className="w-full md:w-8/12 lg:w-9/12">
            {/* عنوان بخش */}
            <div className="mb-6">
              <h2 className="text-title text-xl md:text-2xl font-bold text-right">
                سوالات پرتکرار شما
              </h2>
            </div>

            {/* لیست آکاردئونی */}
            <div className="flex flex-col gap-4">
              {faqs.map((item, index) => {
                const isOpen = openIndex === index;

                return (
                  <div
                    key={index}
                    onClick={() => toggleFAQ(index)}
                    className="group bg-white rounded-[20px]  shadow-box cursor-pointer transition-all duration-300"
                  >
                    {/* هدر آکاردئون */}
                    <div className="flex items-center justify-between p-4 md:p-5 min-h-[70px]">
                      {/* بخش راست: آیکون + متن */}
                      <div className="flex items-center gap-3 md:gap-4 flex-1">
                        {/* 1. آیکون علامت سوال (فقط دسکتاپ) - SVG از کد Vue */}
                        <div className={`hidden md:block shrink-0 ${isOpen ? "text-[#5E8AFF]" : "text-[#EBEFFB]"}`}>
                          <svg
                            width="50"
                            height="50"
                            viewBox="0 0 50 50"
                            fill="currentColor"
                          >
                            {/* دایره پس‌زمینه که رنگش تغییر می‌کند */}
                            <rect
                              width="50"
                              height="50"
                              rx="25"
                              className={`transition-colors duration-300`}
                            />
                            {/* علامت سوال که رنگش تغییر می‌کند */}
                            <path
                              d="M31.1876 21.7205C31.1876 19.8991 30.4854 18.4709 29.352 17.5039C28.2474 16.5611 26.816 16.1229 25.4231 16.0684C22.7547 15.9639 19.5175 17.3173 18.8401 20.3437C18.8073 20.4905 18.8037 20.6424 18.8296 20.7907C18.8554 20.9389 18.9102 21.0806 18.9909 21.2077C19.0715 21.3348 19.1764 21.4447 19.2995 21.5312C19.4226 21.6178 19.5616 21.6792 19.7084 21.712C19.8553 21.7449 20.0072 21.7485 20.1554 21.7226C20.3037 21.6967 20.4454 21.6419 20.5724 21.5613C20.6995 21.4806 20.8094 21.3758 20.896 21.2527C20.9825 21.1295 21.0439 20.9906 21.0768 20.8437C21.4077 19.3633 23.2126 18.2752 25.3333 18.3582C26.3352 18.3976 27.2354 18.7106 27.8642 19.2474C28.4637 19.7584 28.8959 20.5376 28.8959 21.7205C28.8959 22.8888 28.3129 23.6574 27.4623 24.2001C26.5704 24.7694 25.4511 25.0311 24.6912 25.0842C24.4018 25.1044 24.1308 25.2336 23.933 25.4458C23.7351 25.6579 23.6251 25.9372 23.6251 26.2273V28.2082C23.6251 28.5121 23.7458 28.8036 23.9607 29.0185C24.1756 29.2333 24.467 29.3541 24.7709 29.3541C25.0748 29.3541 25.3663 29.2333 25.5812 29.0185C25.7961 28.8036 25.9168 28.5121 25.9168 28.2082V27.2224C26.7922 27.0445 27.7969 26.7054 28.6952 26.1324C30.0317 25.2795 31.1876 23.8573 31.1876 21.7205ZM25.0001 30.4999C24.5139 30.4999 24.0476 30.693 23.7037 31.0369C23.3599 31.3807 23.1668 31.847 23.1668 32.3332C23.1668 32.8195 23.3599 33.2858 23.7037 33.6296C24.0476 33.9734 24.5139 34.1666 25.0001 34.1666C25.4863 34.1666 25.9527 33.9734 26.2965 33.6296C26.6403 33.2858 26.8334 32.8195 26.8334 32.3332C26.8334 31.847 26.6403 31.3807 26.2965 31.0369C25.9527 30.693 25.4863 30.4999 25.0001 30.4999Z"
                              fill="currentColor"
                              className={`transition-colors duration-300 ${isOpen ? "fill-white" : "blue600"}`}
                              // نکته: اگر در طرح هر دو یک رنگ هستند، کلاس ثابت بدهید
                            />
                          </svg>
                        </div>
                        {/* <div className="hidden md:block shrink-0">
                          <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="50" height="50" rx="25" fill="#5E8AFF"/>
                            <path d="M31.1876 21.7205C31.1876 19.8991 30.4854 18.4709 29.352 17.5039C28.2474 16.5611 26.816 16.1229 25.4231 16.0684C22.7547 15.9639 19.5175 17.3173 18.8401 20.3437C18.8073 20.4905 18.8037 20.6424 18.8296 20.7907C18.8554 20.9389 18.9102 21.0806 18.9909 21.2077C19.0715 21.3348 19.1764 21.4447 19.2995 21.5312C19.4226 21.6178 19.5616 21.6792 19.7084 21.712C19.8553 21.7449 20.0072 21.7485 20.1554 21.7226C20.3037 21.6967 20.4454 21.6419 20.5724 21.5613C20.6995 21.4806 20.8094 21.3758 20.896 21.2527C20.9825 21.1295 21.0439 20.9906 21.0768 20.8437C21.4077 19.3633 23.2126 18.2752 25.3333 18.3582C26.3352 18.3976 27.2354 18.7106 27.8642 19.2474C28.4637 19.7584 28.8959 20.5376 28.8959 21.7205C28.8959 22.8888 28.3129 23.6574 27.4623 24.2001C26.5704 24.7694 25.4511 25.0311 24.6912 25.0842C24.4018 25.1044 24.1308 25.2336 23.933 25.4458C23.7351 25.6579 23.6251 25.9372 23.6251 26.2273V28.2082C23.6251 28.5121 23.7458 28.8036 23.9607 29.0185C24.1756 29.2333 24.467 29.3541 24.7709 29.3541C25.0748 29.3541 25.3663 29.2333 25.5812 29.0185C25.7961 28.8036 25.9168 28.5121 25.9168 28.2082V27.2224C26.7922 27.0445 27.7969 26.7054 28.6952 26.1324C30.0317 25.2795 31.1876 23.8573 31.1876 21.7205ZM25.0001 30.4999C24.5139 30.4999 24.0476 30.693 23.7037 31.0369C23.3599 31.3807 23.1668 31.847 23.1668 32.3332C23.1668 32.8195 23.3599 33.2858 23.7037 33.6296C24.0476 33.9734 24.5139 34.1666 25.0001 34.1666C25.4863 34.1666 25.9527 33.9734 26.2965 33.6296C26.6403 33.2858 26.8334 32.8195 26.8334 32.3332C26.8334 31.847 26.6403 31.3807 26.2965 31.0369C25.9527 30.693 25.4863 30.4999 25.0001 30.4999Z" fill="#335FD6"/>
                          </svg>
                        </div> */}

                        {/* متن سوال */}
                        <h3
                          className={`text-sm md:text-base font-bold leading-6 select-none transition-colors duration-300
                            ${isOpen ? "text-[#0f172a]" : "text-gray-600"}`}
                        >
                          {item.question}
                        </h3>
                      </div>
                      {/* 2. آیکون مثلث (فقط موبایل) */}
                      {/* در عکس موبایل، مثلث در سمت چپ متن قرار دارد */}
                      <div
                        className={`md:hidden block shrink-0 ms-4 transition-transform duration-300 ${isOpen ? "rotate-0" : "rotate-180"}`}
                      >
                        {/* مثلث ساده آبی/کمرنگ */}
                        <svg
                          width="12"
                          height="12"
                          viewBox="0 0 24 24"
                          fill="currentColor"
                          className={`${isOpen ? "text-[#335FD6]" : "text-[#C5D4FF]"}`}
                        >
                          <path d="M12 21l-12-18h24z" />
                        </svg>
                      </div>

                      {/* بخش چپ: دکمه دایره‌ای (فقط دسکتاپ) */}
                      <div className="hidden md:block shrink-0 ms-4">
                        {isOpen ? (
                          // آیکون فعال (آبی پررنگ - فلش بالا)
                          <svg
                            width="45"
                            height="45"
                            viewBox="0 0 45 45"
                            fill="none"
                          >
                            <path
                              d="M22.3001 7.0001C30.7601 7.0001 37.6001 13.8401 37.6001 22.3001C37.6001 30.7601 30.7601 37.6001 22.3001 37.6001C13.8401 37.6001 7.0001 30.7601 7.0001 22.3001C7.0001 13.8401 13.8401 7.0001 22.3001 7.0001ZM22.3001 35.8001C29.7701 35.8001 35.8001 29.7701 35.8001 22.3001C35.8001 14.8301 29.7701 8.80009 22.3001 8.80009C14.8301 8.80009 8.80009 14.8301 8.80009 22.3001C8.80009 29.7701 14.8301 35.8001 22.3001 35.8001Z"
                              fill="#335FD6"
                            />
                            <path
                              d="M22.3 13.9152L30.9524 22.5676L29.7036 23.8164L22.3 16.4128L14.8964 23.8164L13.6476 22.5676L22.3 13.9152Z"
                              fill="#335FD6"
                            />
                            <path
                              d="M23.1921 30.3281H21.4081V15.1641H23.1921V30.3281Z"
                              fill="#335FD6"
                            />
                          </svg>
                        ) : (
                          // آیکون غیرفعال (آبی کمرنگ - فلش پایین)
                          <svg
                            width="45"
                            height="46"
                            viewBox="0 0 45 46"
                            fill="none"
                          >
                            <path
                              d="M22.3 38.3C13.84 38.3 7 31.46 7 23C7 14.54 13.84 7.69995 22.3 7.69995C30.76 7.69995 37.6 14.54 37.6 23C37.6 31.46 30.76 38.3 22.3 38.3ZM22.3 9.49995C14.83 9.49995 8.8 15.53 8.8 23C8.8 30.47 14.83 36.5 22.3 36.5C29.77 36.5 35.8 30.47 35.8 23C35.8 15.53 29.77 9.49995 22.3 9.49995Z"
                              fill="#C5D4FF"
                            />
                            <path
                              d="M22.3001 31.3848L13.6477 22.7324L14.8965 21.4836L22.3001 28.8872L29.7037 21.4836L30.9525 22.7324L22.3001 31.3848Z"
                              fill="#C5D4FF"
                            />
                            <path
                              d="M21.408 14.9719H23.192V30.1359H21.408V14.9719Z"
                              fill="#C5D4FF"
                            />
                          </svg>
                        )}
                      </div>
                    </div>

                    {/* بدنه پاسخ (مشترک موبایل و دسکتاپ) */}
                    <div
                      className={`grid overflow-hidden transition-[grid-template-rows] duration-300 ease-in-out
                        ${isOpen ? "grid-rows-[1fr] opacity-100" : "grid-rows-[0fr] opacity-0"}`}
                    >
                      <div className="overflow-hidden">
                        {/* پدینگ‌ها: در موبایل کمتر، در دسکتاپ بیشتر (برای تراز با متن بالا) */}
                        <div className="px-4 pb-5 pt-0 md:pe-[70px] md:ps-[90px] md:pb-6">
                          <p
                            className="text-[#335FD6] text-sm md:text-base font-medium leading-7 text-justify"
                            dangerouslySetInnerHTML={{ __html: item.answer }}
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                );
              })}
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}
